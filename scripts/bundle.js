"use strict";function setUserName(e){global.user||(global.user=e,document.title="["+e+"] "+document.title)}function startTimers(){window.setInterval(function(){global.connected&&global.ws.emit("player_stats")},3e5),window.setInterval(function(){global.connected&&global.map.updatePokestopsStatus()},6e4)}function startListenToSocket(){inventory.init(global.config.locale),console.log("Connecting to "+global.config.websocket),startTimers();var e=localStorage.getItem("pokemonSettings");e?global.pokemonSettings=JSON.parse(e):global.pokemonSettings={};var t=io.connect(global.config.websocket+"/event");global.ws=t,t.on("connect",function(){console.log("Connected to Bot"),global.connected=!0,$(".loading").text("Waiting to get GPS coordinates from Bot...")}),t.on("disconnect",function(){global.connected=!1}),t.on("bot_initialized",function(e){e.username&&(console.log("Bot Ready."),console.log(e),setUserName(e.username),global.player=e.player,global.player&&($(".player").trigger("pogo:player_update"),ga("send","event","level",global.player.level)),e.storage&&(global.storage={pokemon:e.storage.max_pokemon_storage,items:e.storage.max_item_storage}),global.map.addToPath({lat:e.coordinates[0],lng:e.coordinates[1]})),$(".toolbar div").show(),global.ws.emit("pokemon_settings")}),t.on("pokemon_settings",function(e){global.pokemonSettings=e,localStorage.setItem("pokemonSettings",JSON.stringify(global.pokemonSettings))}),t.on("player_stats",function(e){global.player=e.player,$(".player").trigger("pogo:player_update")}),t.on("position",function(e){global.snipping||global.map.addToPath({lat:e.coordinates[0],lng:e.coordinates[1]})}),t.on("pokestops",function(e){var t=Array.from(e.pokestops.filter(function(e){return 1==e.fort_type}),function(e){return{id:e.fort_id,lat:e.latitude,lng:e.longitude,cooldown:parseInt(e.cooldown_timestamp_ms)||null,lureExpire:parseInt(e.lure_expires_timestamp_ms)||null}});global.map.addPokestops(t)}),t.on("pokestop_visited",function(e){console.log("Pokestop Visited"),global.map.addVisitedPokestop({id:e.pokestop.fort_id,name:"",lat:e.pokestop.latitude,lng:e.pokestop.longitude,cooldown:parseInt(e.pokestop.cooldown_timestamp_ms)||null,lureExpire:parseInt(e.pokestop.lure_expires_timestamp_ms)||null,visited:!0})}),t.on("pokemon_caught",function(e){console.log("Pokemon caught");var t=e.pokemon,o={id:t.pokemon_id,name:inventory.getPokemonName(t.pokemon_id),cp:t.combat_power,iv:(100*t.potential).toFixed(1),lvl:inventory.getPokemonLevel(t)};e.position&&(o.lat=e.position.latitude,o.lng=e.position.longitude),global.map.addCatch(o),pokemonToast(o,{ball:t.pokeball})}),t.on("pokemon_evolved",function(e){var t={id:e.evolution,name:inventory.getPokemonName(e.evolution)},o=inventory.getPokemonName(e.pokemon.pokemon_id);pokemonToast(t,{title:"A "+o+" Evolved"})}),t.on("inventory_list",function(e){var t=Array.from(Object.keys(e.inventory).filter(function(e){return"count"!=e}),function(t){var o=parseInt(t);return{item_id:o,name:inventory.getItemName(o),count:e.inventory[t]}});global.map.displayInventory(t)}),t.on("pokemon_list",function(e){var t=Array.from(e.pokemon,function(t){var o=global.pokemonSettings[t.pokemon_id-1]||{};return{id:t.unique_id,pokemonId:t.pokemon_id,inGym:null!=t.deployed_fort_id,canEvolve:o.evolution_ids&&o.evolution_ids.length>0,cp:t.combat_power,iv:(100*t.potential).toFixed(1),lvl:inventory.getPokemonLevel(t),name:t.nickname||inventory.getPokemonName(t.pokemon_id),candy:e.candy[o.family_id]||0,candyToEvolve:o.candy_to_evolve,favorite:t.favorite>0,stats:{atk:t.attack,def:t.defense,hp:t.hp,maxHp:t.max_hp,sta:t.stamina}}});global.map.displayPokemonList(t,null,e.eggs_count)}),t.on("eggs_list",function(e){var t=e.egg_incubators.filter(function(e){return 0!=e.target_km_walked||0!=e.start_km_walked});t=Array.from(t,function(t){return e.km_walked=e.km_walked||0,{type:901==t.item_id?"incubator-unlimited":"incubator",totalDist:t.target_km_walked-t.start_km_walked,doneDist:e.km_walked-t.start_km_walked}});var o=Array.from(e.egg_incubators,function(e){return e.pokemon_id}),n=Array.from(e.eggs.filter(function(e){return o.indexOf(e.unique_id)<0}),function(e){return{type:"egg",totalDist:e.total_distance,doneDist:e.walked_distance}});global.map.displayEggsList(t.concat(n))})}function errorToast(e){toastr.error(e,"Error",{progressBar:!0,positionClass:"toast-top-right",timeOut:"5000",closeButton:!0})}function pokemonToast(e,t){if(!global.config.noPopup){t=t||{};var o=t.title||(global.snipping?"Snipe success":"Catch success"),n=global.snipping?toastr.success:toastr.info,i=e.name;e.lvl&&(i+=" (lvl "+e.lvl+")");var a="<div>"+i+"</div><div>";a+="<img src='./assets/pokemon/"+e.id+".png' height='50' />",t.ball&&(a+="<img src='./assets/inventory/"+t.ball+".png' height='30' />"),a+="</div>",n(a,o,{progressBar:!0,positionClass:"toast-top-right",timeOut:5e3,closeButton:!0})}}!function(){var e=null,t=null,o={};o.init=function(o,n){o=o||"en",$.when($.ajax({url:"assets/json/pokemon."+o+".json",success:function(t){e="string"==typeof t?JSON.parse(t):t}}),$.ajax({url:"assets/json/inventory."+o+".json",success:function(e){t="string"==typeof e?JSON.parse(e):e}})).then(n)},o.getPokemonName=function(t){return e[t]},o.getItemName=function(e){return t[e]};var n={93:1,94:1,135:1.5,166:2,192:2.5,215:3,236:3.5,255:4,273:4.5,290:5,306:5.5,321:6,335:6.5,349:7,362:7.5,375:8,387:8.5,399:9,411:9.5,422:10,432:10.5,443:11,453:11.5,462:12,472:12.5,481:13,490:13.5,499:14,508:14.5,517:15,525:15.5,534:16,542:16.5,550:17,558:17.5,566:18,574:18.5,582:19,589:19.5,597:20,604:20.5,612:21,619:21.5,626:22,633:22.5,640:23,647:23.5,654:24,661:24.5,667:25,674:25.5,681:26,687:26.5,694:27,700:27.5,706:28,713:28.5,719:29,725:29.5,731:30,734:30.5,737:31,740:31.5,743:32,746:32.5,749:33,752:33.5,755:34,758:34.5,761:35,764:35.5,767:36,770:36.5,773:37,776:37.5,778:38,781:38.5,784:39,790:40};o.getPokemonLevel=function(e){var t=1e3*(e.combat_power_multiplier+e.additional_cp_multiplier);return n[0|t]},window.inventoryService=o}();var Map=function(e){var t=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"),o=L.tileLayer("http://{s}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png"),n=L.tileLayer("http://{s}.tile2.opencyclemap.org/transport/{z}/{x}/{y}.png"),i=L.tileLayer("http://{s}.tile.stamen.com/toner/{z}/{x}/{y}.png"),a=L.tileLayer("http://{s}.tile.stamen.com/watercolor/{z}/{x}/{y}.jpg");this.layerPokestops=new L.LayerGroup,this.layerCatches=new L.LayerGroup,this.layerPath=new L.LayerGroup,this.map=L.map(e,{layers:[t,this.layerPokestops,this.layerCatches,this.layerPath]});var s={OpenStreetMap:t,OpenCycleMap:o,"OpenCycleMap Transport":n,Toner:i,Watercolor:a},r={Path:this.layerPath,Pokestops:this.layerPokestops,Catches:this.layerCatches};L.control.layers(s,r).addTo(this.map),this.path=null,this.steps=[],this.catches=[],this.pokestops=[],this.pokemonList=[]};Map.prototype.saveContext=function(){var e=Array.from(this.pokestops,function(e){return{id:e.id,lat:e.lat,lng:e.lng,visited:e.visited}});sessionStorage.setItem("available",!0),sessionStorage.setItem("steps",JSON.stringify(this.steps)),sessionStorage.setItem("catches",JSON.stringify(this.catches)),sessionStorage.setItem("pokestops",JSON.stringify(e))},Map.prototype.loadContext=function(){try{"true"==sessionStorage.getItem("available")&&(console.log("Load data from storage to restore session"),this.steps=JSON.parse(sessionStorage.getItem("steps"))||[],this.catches=JSON.parse(sessionStorage.getItem("catches"))||[],this.pokestops=JSON.parse(sessionStorage.getItem("pokestops"))||[],this.steps.length>0&&this.initPath(),this.initPokestops(),this.initCatches(),sessionStorage.setItem("available",!1))}catch(e){console.log(e)}},Map.prototype.initPath=function(){if(null!=this.path)return!0;if(!this.me){var e=this.steps[this.steps.length-1];this.map.setView([e.lat,e.lng],16),this.me=L.marker([e.lat,e.lng],{zIndexOffset:200}).addTo(this.map).bindPopup(e.lat.toFixed(4)+","+e.lng.toFixed(4)),$(".loading").hide()}if(this.steps.length>=2){var t=Array.from(this.steps,function(e){return L.latLng(e.lat,e.lng)});return this.path=L.polyline(t,{color:"red"}).addTo(this.layerPath),!0}return!1},Map.prototype.initCatches=function(){for(var e=0;e<this.catches.length;e++){var t=this.catches[e],o=L.icon({iconUrl:"./assets/pokemon/"+t.id+".png",iconSize:[50,50],iconAnchor:[20,20]}),n=t.name+" <br /> Cp:"+t.cp+" Iv:"+t.iv+"%";t.lvl&&(n=t.name+" (lvl "+t.lvl+") <br /> Cp:"+t.cp+" Iv:"+t.iv+"%"),L.marker([t.lat,t.lng],{icon:o,zIndexOffset:100}).bindPopup(n).addTo(this.layerCatches)}},Map.prototype.initPokestops=function(){for(var e=0;e<this.pokestops.length;e++){var t=this.pokestops[e],o=t.visited?"./assets/img/pokestop_visited.png":"./assets/img/pokestop_available.png",n=L.icon({iconUrl:o,iconSize:[40,40],iconAnchor:[20,20]});t.marker=L.marker([t.lat,t.lng],{icon:n,zIndexOffset:50}).bindPopup(t.name).addTo(this.layerPokestops)}},Map.prototype.addToPath=function(e){if(this.steps.push(e),global.config.memory.limit&&this.steps.length>global.config.memory.mathPath){this.layerPath.clearLayers(),this.path=null;var t=Math.floor(.7*global.config.memory.mathPath);this.steps=this.steps.slice(-t)}if(this.initPath()){var o=L.latLng(e.lat,e.lng);this.path.addLatLng(o),this.me.setLatLng(o).getPopup().setContent(e.lat.toFixed(4)+","+e.lng.toFixed(4)),global.config.followPlayer&&this.map.panTo(o,!0)}},Map.prototype.addCatch=function(e){if(!e.lat){if(this.steps.length<=0)return;var t=this.steps[this.steps.length-1];e.lat=t.lat,e.lng=t.lng}var o=e.name+"<br /> CP:"+e.cp+" IV:"+e.iv+"%";if(e.lvl&&(o=e.name+" (lvl "+e.lvl+") <br /> Cp:"+e.cp+" Iv:"+e.iv+"%"),this.catches.push(e),global.config.memory.limit&&this.catches.length>global.config.memory.maxCaught){console.log("Clean catches");var n=Math.floor(.7*global.config.memory.maxCaught);this.catches=this.catches.slice(-n),this.layerCatches.clearLayers(),this.initCatches()}else{var i=L.icon({iconUrl:"./assets/pokemon/"+e.id+".png",iconSize:[50,50],iconAnchor:[25,25]});L.marker([e.lat,e.lng],{icon:i,zIndexOffset:100}).bindPopup(o).addTo(this.layerCatches)}},Map.prototype.addVisitedPokestop=function(e){if(e.lat){var t=this.pokestops.find(function(t){return t.id==e.id});if(t)Object.assign(t,e);else{this.pokestops.push(e),t=e;var o=L.icon({iconUrl:"./assets/img/pokestop_cooldown.png",iconSize:[40,40],iconAnchor:[20,20]});e.marker=L.marker([e.lat,e.lng],{icon:o,zIndexOffset:50}).addTo(this.layerPokestops)}t.visited=!0,t&&t.marker&&(t.marker.setIcon(L.icon({iconUrl:"./assets/img/pokestop_cooldown.png",iconSize:[40,40],iconAnchor:[20,20]})),t.name&&t.marker.bindPopup(t.name))}},Map.prototype.addPokestops=function(e){for(var t=0;t<e.length;t++){var o=e[t],n=this.pokestops.find(function(e){return e.id==o.id});n?o=Object.assign(n,o):this.pokestops.push(o);var i="pokestop_available";if(o.cooldown&&moment(o.cooldown).isAfter()?i="pokestop_cooldown":o.lureExpire&&moment(o.lureExpire).isAfter()?i="pokestop_lure":o.visited&&(i="pokestop_visited"),o.marker)o.marker.setIcon(L.icon({iconUrl:"./assets/img/"+i+".png",iconSize:[40,40],iconAnchor:[20,20]}));else{var i=L.icon({iconUrl:"./assets/img/"+i+".png",iconSize:[40,40],iconAnchor:[20,20]});o.marker=L.marker([o.lat,o.lng],{icon:i,zIndexOffset:50}).addTo(this.layerPokestops)}}global.config.memory.limit&&this.pokestops.length>global.config.memory.maxPokestops},Map.prototype.updatePokestopsStatus=function(){this.pokestops.forEach(function(e){var t=!1;if(e.cooldown&&moment(e.cooldown).isBefore()?(e.cooldown=null,t=!0):e.lureExpire&&moment(e.lureExpire).isBefore()&&(e.lureExpire=null,t=!0),t){var o="pokestop_available";e.cooldown&&moment(e.cooldown).isAfter()?o="pokestop_cooldown":e.lureExpire&&moment(e.lureExpire).isAfter()?o="pokestop_lure":e.visited&&(o="pokestop_visited"),e.marker.setIcon(L.icon({iconUrl:"./assets/img/"+o+".png",iconSize:[40,40],iconAnchor:[20,20]}))}})},Map.prototype.displayPokemonList=function(e,t,o){console.log("Pokemon list"),global.active="pokemon",this.pokemonList=e||this.pokemonList,this.eggsCount=o||this.eggsCount||0,t?localStorage.setItem("sortPokemonBy",t):t=localStorage.getItem("sortPokemonBy")||"cp","pokemonId"==t?this.pokemonList=this.pokemonList.sort(function(e,o){if(e[t]!=o[t])return e[t]-o[t];var n=o.cp!=e.cp?"cp":"iv";return o[n]-e[n]}):this.pokemonList=this.pokemonList.sort(function(e,o){if(e[t]!=o[t])return o[t]-e[t];if(e.pokemonId!=o.pokemonId)return e.pokemonId-o.pokemonId;var n="cp"==t?"iv":"cp";return o[n]-e[n]});var n=this.eggsCount+this.pokemonList.length;$(".inventory .numberinfo").text(n+"/"+global.storage.pokemon);var i=$(".inventory .data");i.html(""),this.pokemonList.forEach(function(e){var t=e.canEvolve&&!e.inGym&&e.candy>=e.candyToEvolve,o=t?"":"style='display:none'",n=t?"canEvolve":"",a=e.favorite?"style='display:none'":"",s=e.canEvolve?"":"style='display:none'";i.append('\n            <div class="pokemon">\n                <div class="transfer" data-id=\''+e.id+"'>\n                    <a title='Transfer' href=\"#\" class=\"transferAction "+a+'"><img src="./assets/img/recyclebin.png" /></a>\n                    <a title=\'Evolve\' href="#" class="evolveAction" '+o+'><img src="./assets/img/evolve.png" /></a>\n                </div>\n                <span class="imgspan '+n+'"><img src="./assets/pokemon/'+e.pokemonId+'.png" /></span>\n                <span class="name">'+e.name+'</span>\n                <span class="info">CP: <strong>'+e.cp+"</strong> IV: <strong>"+e.iv+'%</strong></span>\n                <span class="info">ATK: <strong>'+e.stats.atk+"</strong> DEF: <strong>"+e.stats.def+"</strong> STA: <strong>"+e.stats.sta+'</strong></span>\n                <span class="info">Candy: '+e.candy+"<span "+s+">/"+e.candyToEvolve+"</span></span>\n            </div>\n        ")}),$(".pokemonsort").show(),$(".inventory").show().addClass("active")},Map.prototype.displayEggsList=function(e){console.log("Eggs list"),global.active="eggs",$(".inventory .sort").hide(),$(".inventory .numberinfo").text(e.length+"/9");var t=$(".inventory .data");t.html(""),e.forEach(function(e){e&&t.append('\n                <div class="item">\n                    <span class="imgspan"><img src="./assets/inventory/'+e.type+'.png" /></span>\n                    <span>'+e.doneDist.toFixed(1)+" / "+e.totalDist.toFixed(1)+" km</span>\n                </div>\n            ")}),$(".inventory").show().addClass("active")},Map.prototype.displayInventory=function(e){console.log("Inventory list"),global.active="inventory",$(".inventory .sort").hide();var t=e.filter(function(e){return 901!=e.item_id}).reduce(function(e,t){return e+t.count},0);$(".inventory .numberinfo").text(t+"/"+global.storage.items);var o=$(".inventory .data");o.html(""),e.forEach(function(e){var t=901==e.item_id?"hide":"";o.append('\n            <div class="item">\n                <div class="transfer" data-id=\''+e.item_id+"' data-count='"+e.count+"'>\n                    <a title='Drop' href=\"#\" class=\"dropItemAction "+t+'"><img src="./assets/img/recyclebin.png" /></a>\n                </div>\n\n                <span class="count">x'+e.count+'</span>\n                <span class="imgspan"><img src="./assets/inventory/'+e.item_id+'.png" /></span>\n                <span class="info">'+e.name+"</span>\n            </div>\n        ")}),$(".inventory").show().addClass("active")};var inventory=window.inventoryService;!function(){function e(e,t){o.config.noConfirm?t():vex.dialog.confirm({message:e,callback:function(e){e&&t()}})}function t(){window.ga=window.ga||function(){};var t=localStorage.getItem("sortPokemonBy")||"cp";$("#sortBy"+t).addClass("active").siblings().removeClass("active"),$("#pokemonLink").click(function(){"1"==$(".inventory").css("opacity")&&$(".inventory .data .pokemon").length?$(".inventory").removeClass("active"):o.ws.emit("pokemon_list")}),$("#eggsLink").click(function(){"1"==$(".inventory").css("opacity")&&$(".inventory .data .eggs").length?$(".inventory").removeClass("active"):o.ws.emit("eggs_list")}),$("#inventoryLink").click(function(){"1"==$(".inventory").css("opacity")&&$(".inventory .data .items").length?$(".inventory").removeClass("active"):o.ws.emit("inventory_list")}),$("#sortBypokemonId").click(function(){return o.map.displayPokemonList(null,"pokemonId")}),$("#sortBycp").click(function(){return o.map.displayPokemonList(null,"cp")}),$("#sortByiv").click(function(){return o.map.displayPokemonList(null,"iv")}),$("#sortBypokemonId, #sortBycp, #sortByiv").click(function(){$(this).hasClass("active")||$(this).toggleClass("active").siblings().removeClass("active")}),$(".inventory .refresh").click(function(){console.log("Refresh"),o.ws.emit(o.active+"_list")}),$(".inventory .close").click(function(){$(this).parent().removeClass("active"),$(".inventory .sort").hide()}),$(".message .close").click(function(){$(this).parent().hide()}),$(".close").click(function(){o.active=null}),$("#recycleLink").click(function(){sessionStorage.setItem("available",!1),window.location.reload()}),$("#settingsLink").click(function(){o.map.saveContext(),window.location="config.html"}),$(".inventory .data").on("click","a.transferAction",function(){var t=$(this).parent(),n=t.data().id,i=o.map.pokemonList.findIndex(function(e){return e.id==n}),a=o.map.pokemonList[i],s=o.map.pokemonList.filter(function(e){return e.pokemonId==a.pokemonId}).length-1,r=inventoryService.getPokemonName(a.pokemonId),l="Are you sure you want to transfer this "+r+"? <br /> You will have <b>"+s+"</b> left.";e(l,function(){ga("send","event","transfer",r),o.ws.emit("transfer_pokemon",{id:n}),o.map.pokemonList.splice(i,1),t.parent().fadeOut()})}),$(".inventory .data").on("click","a.evolveAction",function(){var t=$(this).parent(),n=t.data().id,i=o.map.pokemonList.findIndex(function(e){return e.id==n}),a=o.map.pokemonList[i],s=o.map.pokemonList.filter(function(e){return e.pokemonId==a.pokemonId}).length-1,r=inventoryService.getPokemonName(a.pokemonId),l="Are you sure you want to evolve this "+r+"? <br /> You will have <b>"+s+"</b> left.";e(l,function(){ga("send","event","evolve",r),o.ws.emit("evolve_pokemon",{id:n}),o.map.pokemonList.splice(i,1),t.parent().fadeOut()})}),$(".inventory .data").on("click","a.dropItemAction",function(){var e=$(this).parent(),t=e.data().id,n=inventoryService.getItemName(t),i=e.data().count,a="How many <b>"+n+"</b> would you like to drop?";vex.dialog.confirm({message:a,input:'\n                    <p class="range-field">\n                        <input type="range" name="count" value="1" min="1" max="'+i+"\" onchange=\"$('#display-range').text(this.value)\" />\n                    </p>\n                    Drop: <span id='display-range'>1</span>\n                ",callback:function(a){if(a){var s=parseInt(a.count);ga("send","event","drop_items",n),o.ws.emit("drop_items",{id:t,count:s}),e.data("count",i-s),e.parent().find(".count").text(i-s)}}})}),$(".player").on("pogo:player_update",function(){if(o.player){var e=$(".player");e.find(".playername .value").text(o.user),e.find(".level .value").text(o.player.level);var t=100*(o.player.experience-o.player.prev_level_xp)/(o.player.next_level_xp-o.player.prev_level_xp);e.find(".myprogress .value").css("width",t.toFixed(0)+"%"),e.show()}}),o.config.websocket?(o.map=new Map("map"),o.map.loadContext(),startListenToSocket()):window.location="config.html"}var o={storage:{items:350,pokemon:250},snipping:!1};window.global=o,o.config=window.configService.load(),o.version=o.config.version,document.title+=" - "+o.version,$(function(){inventoryService.init(o.config.locale,t)})}(),$(function(){function e(e,t){e=e.replace(/[a-z]/g,""),t=t.replace(/[a-z]/g,"");var o,n,i=/(\.0+)+$/,a=e.replace(i,"").split("."),s=t.replace(i,"").split("."),r=Math.min(a.length,s.length);for(o=0;o<r;o++)if(n=parseInt(a[o],10)-parseInt(s[o],10))return n;return a.length-s.length}function t(){try{var t="https://api.github.com/repos/nicoschmitt/necrobotvisualizer/releases";$.getJSON(t,function(t){t=t.filter(function(e){return!e.prerelease&&!e.draft});var o=t[0].name,n=t[0].html_url;e(o,global.version)>0&&(console.log("New version available: "+o),$(".message .data").html("<div>New version available. Check on GitHub to download it. <a href='"+n+"'>Here</a></div>"),$(".message").show())})}catch(e){console.log(e)}}"function"==typeof require&&t()}),function(e,t,o,n,i,a,s){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(o),s=t.getElementsByTagName(o)[0],a.async=1,a.src="https://www.google-analytics.com/analytics.js",s.parentNode.insertBefore(a,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga");try{"function"==typeof require?(ga("create","UA-81497637-1","auto",{storage:"none",clientId:localStorage.getItem("ga:clientId")}),ga(function(e){localStorage.setItem("ga:clientId",e.get("clientId"))})):ga("create","UA-81497637-1","auto"),ga("set","checkProtocolTask",null),ga("set","location","http://necrovisualizer.nicontoso.eu"),ga("send","pageview"),ga("send","event","version",document.title,document.title)}catch(e){window.ga=function(){}}